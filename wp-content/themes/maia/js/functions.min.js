"use strict";class StickyHeader{constructor(){let e=this;this.$tbayHeader=$(".tbay_header-template"),this.$tbayHeaderMain=$(".tbay_header-template .header-main"),this.$tbayHeader.hasClass("main-sticky-header")&&this.$tbayHeaderMain.length>0&&this._initStickyHeader(),$(".search-min-wrapper .btn-search-min").click(this._onClickSeachMin),$(".tbay-search-form .overlay-box").click(this._onClickOverLayBox),this._intSearchOffcanvas;let t=$(".element-sticky-header");t.length>0&&e._initELementStickyheader(t)}_initStickyHeader(){var e=this,t=$(window).width(),a=e.$tbayHeader.outerHeight(),n=e.$tbayHeaderMain.outerHeight(),o=$("#wpadminbar").length>0?$("#wpadminbar").outerHeight():0,i=e.$tbayHeaderMain.offset().top;if(t>=1024)if(0==i||i==o){if(e.$tbayHeader.hasClass("sticky-header"))return;e._stickyHeaderOnDesktop(n,i,o),e.$tbayHeaderMain.addClass("sticky-1"),$(window).scroll(function(){$(this).scrollTop()>a?e.$tbayHeaderMain.addClass("sticky-box"):e.$tbayHeaderMain.removeClass("sticky-box")})}else $(window).scroll(function(){if(e.$tbayHeader.hasClass("main-sticky-header"))if($(this).scrollTop()>i-o){if(e.$tbayHeader.hasClass("sticky-header"))return;e._stickyHeaderOnDesktop(n,i,o)}else e.$tbayHeaderMain.css("top",0).css("position","relative").removeClass("sticky-header").parent().css("padding-top",0),e.$tbayHeaderMain.prev().css("margin-bottom",0)})}_stickyHeaderOnDesktop(e,t,a){this.$tbayHeaderMain.addClass("sticky-header").css("top",a).css("position","fixed"),0==t||t==a?this.$tbayHeaderMain.parent().css("padding-top",e):this.$tbayHeaderMain.prev().css("margin-bottom",e)}_onClickSeachMin(){$(".tbay-search-form.tbay-search-min form").toggleClass("show"),$(this).toggleClass("active")}_onClickOverLayBox(){$(".search-min-wrapper .btn-search-min").removeClass("active"),$(".tbay-search-form.tbay-search-min form").removeClass("show")}_intSearchOffcanvas(){if(0!==$("#tbay-offcanvas-main").length){$('[data-toggle="offcanvas-main-search"]').off().on("click",function(){$("#wrapper-container").toggleClass("show"),$("#tbay-offcanvas-main").toggleClass("show")});var e=$("#tbay-offcanvas-main, .search");$(window).on("click.Bst",function(t){0!=e.has(t.target).length||e.is(t.target)||($("#wrapper-container").removeClass("show"),$("#tbay-offcanvas-main").removeClass("show"))})}}_initELementStickyheader(e){var t=e.first();let a=this;var n=!1,o=0,i=0;if(0!==t.parents(".tbay_header-template").length){var s=$("#wpadminbar").length>0?$("#wpadminbar").outerHeight():0,r=t.offset().top-$(window).scrollTop()-s,c=r;t.prevAll().each(function(){i+=$(this).outerHeight()}),e.each(function(){$(this).parents(".element-sticky-header").length>0||(o+=$(this).outerHeight())}),a._initELementStickyheaderContent(r,c,o,i,e,t,s,n),$(window).scroll(function(){n=!0,0===$(window).scrollTop()&&(c=0),a._initELementStickyheaderContent(r,c,o,i,e,t,s,n)})}}_initELementStickyheaderContent(e,t,a,n,o,i,s,r){if($(window).scrollTop()<n&&r||0===$(window).scrollTop()&&r){if(i.parent().children().first().hasClass("element-sticky-header"))return;i.css("top",""),t===e||0===t?o.last().next().css("padding-top",""):i.prev().css("margin-bottom",""),i.parent().css("padding-top",""),o.each(function(){$(this).removeClass("sticky"),$(this).prev(".element-sticky-header").length>0&&$(this).css("top","")})}else{if($(window).scrollTop()<n&&!r)return;o.each(function(){if(!($(this).parents(".element-sticky-header").length>0)&&($(this).addClass("sticky"),$(this).prevAll(".element-sticky-header").length>0)){let e=0;$(this).prevAll(".element-sticky-header").each(function(){e+=$(this).outerHeight()}),$(this).css("top",e+s)}}),i.css("top",s),t===e||0===t?(i.addClass("sticky"),i.parent().css("padding-top",a)):i.prev().css("margin-bottom",a)}}}const TREE_VIEW_OPTION_MEGA_MENU={animated:300,collapsed:!0,unique:!0,persist:"location"},TREE_VIEW_OPTION_MOBILE_MENU={animated:300,collapsed:!0,unique:!0,hover:!1};class Mobile{constructor(){this._mobileMenu(),this._Select_change_form(),this._FooterMobileAccordion(),this._topBarDevice(),$(window).scroll(()=>{this._topBarDevice()})}_topBarDevice(){var e=$(window).scrollTop(),t=$("#wpadminbar").length>0?$("#wpadminbar").outerHeight():0,a=$(window).scrollTop();$(".topbar-device-mobile").toggleClass("active",e<=t),$("#tbay-mobile-menu").toggleClass("offsetop",0==a)}_mobileMenu(){$('[data-toggle="offcanvas"], .btn-offcanvas').click(function(){$("#wrapper-container").toggleClass("active"),$("#tbay-mobile-menu").toggleClass("active")}),$("#main-mobile-menu .caret").click(function(){$("#main-mobile-menu .dropdown").removeClass("open"),$(event.target).parent().addClass("open")})}_Select_change_form(){$(".topbar-device-mobile > form select").on("change",function(){this.form.submit()})}_FooterMobileAccordion(){$(window).width()>=768||$(".footer-mobile-collapse .heading-tbay-title").off().on("click",function(){var e=$(this).parent(),t=e.find("> *:not(.heading-tbay-title)");e.hasClass("opened-collapse")?(e.removeClass("opened-collapse"),t.stop().slideUp(200)):(e.addClass("opened-collapse"),t.stop().slideDown(200))})}}class AccountMenu{constructor(){this._slideToggleAccountMenu(".tbay-login"),this._slideToggleAccountMenu(".topbar-mobile"),this._tbayClickNotMyAccountMenu()}_tbayClickNotMyAccountMenu(){var e=$(window),t=$(".tbay-login .dropdown .account-menu,.topbar-mobile .dropdown .account-menu,.tbay-login .dropdown .account-button,.topbar-mobile .dropdown .account-button");e.on("click.Bst",function(e){0!=t.has(e.target).length||t.is(e.target)||($(".tbay-login .dropdown .account-menu").slideUp(500),$(".topbar-mobile .dropdown .account-menu").slideUp(500))})}_slideToggleAccountMenu(e){$(e).find(".dropdown .account-button").click(function(){$(e).find(".dropdown .account-menu").slideToggle(500)})}}class BackToTop{constructor(){this._init()}_init(){$(window).scroll(function(){var e=$(this).scrollTop()>400;$(".tbay-to-top").toggleClass("active",e),$(".tbay-category-fixed").toggleClass("active",e)}),$("#back-to-top-mobile, #back-to-top").click(this._onClickBackToTop)}_onClickBackToTop(){$("html, body").animate({scrollTop:"0px"},0)}}class FuncCommon{constructor(){this._progressAnimation(),this._createWrapStart(),$(".mod-heading .widget-title > span").wrapStart(),this._tbayActiveAdminBar(),this._tbayResizeMegamenu(),this._initHeaderCoverBG(),this._initCanvasSearch(),this._initTreeviewMenu(),this._categoryMenu(),$(window).scroll(()=>{this._tbayActiveAdminBar()}),jQuery(window).on("resize",()=>{this._tbayResizeMegamenu()}),this._moveFormLogin(),this._moveFormCoupon(),this._moveNoticesLogin()}_tbayActiveAdminBar(){$("#wpadminbar").length>0&&$("body").addClass("active-admin-bar")}_createWrapStart(){$.fn.wrapStart=function(){return this.each(function(){var e=$(this).contents().filter(function(){return 3==this.nodeType}).first(),t=e.text().trim(),a=t.split(" ",1).join(" ");e.length&&(e[0].nodeValue=t.slice(a.length),e.before("<b>"+a+"</b>"))})}}_progressAnimation(){$("[data-progress-animation]").each(function(){var e=$(this);e.appear(function(){var t=e.attr("data-appear-animation-delay")?e.attr("data-appear-animation-delay"):1;t>1&&e.css("animation-delay",t+"ms"),setTimeout(function(){e.animate({width:e.attr("data-progress-animation")},800)},t)},{accX:0,accY:-50})})}_tbayResizeMegamenu(){var e=$("body").innerWidth();$(".tbay_custom_menu").length>0&&$(".tbay_custom_menu").hasClass("tbay-vertical-menu")&&(e>767?this._resizeMegaMenuOnDesktop():this._initTreeViewForMegaMenuOnMobile()),$(".tbay-megamenu").length>0&&$(".tbay-megamenu,.tbay-offcanvas-main").hasClass("verticle-menu")&&e>767&&this._resizeMegaMenuVertical()}_resizeMegaMenuVertical(){var e=parseInt($("#main-container.container").innerWidth()),t=e-parseInt($(".verticle-menu").innerWidth());$(".verticle-menu").find(".aligned-fullwidth").children(".dropdown-menu").css({"max-width":t,width:e-30})}_resizeMegaMenuOnDesktop(){let e=$("#main-container.container").innerWidth()-$(".tbay-vertical-menu").innerWidth(),t=$("#main-container.container").innerWidth()-30;$(".tbay-vertical-menu").find(".aligned-fullwidth").children(".dropdown-menu").css({"max-width":e,width:t})}_initTreeViewForMegaMenuOnMobile(){void 0!==$.fn.treeview&&$(".tbay-vertical-menu > .widget_nav_menu >.nav > ul").treeview(TREE_VIEW_OPTION_MEGA_MENU)}_moveFormLogin(){0!==$(".woocommerce-form-login-toggle").length&&$(".woocommerce-form-login-toggle").parent().find(".woocommerce-form-login").insertAfter($(".woocommerce-form-login-toggle .woocommerce-info"))}_moveNoticesLogin(){0!==$(".woocommerce-form-login-toggle").length&&$(".woocommerce > .woocommerce-notices-wrapper").insertAfter($(".woocommerce-form-login-toggle .woocommerce-form-login "))}_moveFormCoupon(){0!==$(".woocommerce-form-coupon-toggle").length&&$(".woocommerce-form-coupon-toggle").parent().find(".woocommerce-form-coupon").insertAfter($(".woocommerce-form-coupon-toggle .woocommerce-info"))}_initHeaderCoverBG(){let e=$(".tbay-horizontal .navbar-nav > li,.tbay-horizontal-default .navbar-nav > li, .tbay_header-template .product-recently-viewed-header"),t=$(".tbay-search-form .tbay-search"),a=$(".category-inside .category-inside-title"),n=$(".cart-popup");e.mouseenter(function(){0!==$(this).parents("#tbay-header").length&&0!=$(this).children(".dropdown-menu, ul, .content-view").length&&$(".tbay_header-template").addClass("nav-cover-active-1")}).mouseleave(function(){$(this).closest(".dropdown-menu").length||$(".tbay_header-template").removeClass("nav-cover-active-1")}),t.focusin(function(){$(this).closest(".dropdown-menu").length||t.parents(".sidebar-canvas-search").length>0||0===$(this).closest(".tbay_header-template").length||$(".tbay_header-template").addClass("nav-cover-active-2")}).focusout(function(){$(".tbay_header-template").removeClass("nav-cover-active-2")}),n.on("shown.bs.dropdown",function(e){$(e.target).closest(".tbay_header-template").addClass("nav-cover-active-3")}).on("hidden.bs.dropdown",function(e){$(e.target).closest(".tbay_header-template").removeClass("nav-cover-active-3")}),a.parents(".tbay_header-template")&&($(document.body).on("tbay_category_inside_open",()=>{$(".tbay_header-template").addClass("nav-cover-active-4")}),$(document.body).on("tbay_category_inside_close",()=>{$(".tbay_header-template").removeClass("nav-cover-active-4")}))}_initCanvasSearch(){let e=$("#tbay-search-form-canvas .sidebar-canvas-search .sidebar-content .tbay-search");e.focusin(function(){e.parent().addClass("search_cv_active")}).focusout(function(){e.parent().removeClass("search_cv_active")})}_initTreeviewMenu(){void 0!==$.fn.treeview&&($("#category-menu").addClass("treeview"),jQuery(".treeview-menu .menu, #category-menu").treeview(TREE_VIEW_OPTION_MEGA_MENU),jQuery("#main-mobile-menu, #main-mobile-menu-xlg").treeview(TREE_VIEW_OPTION_MOBILE_MENU))}_categoryMenu(){$(".category-inside .category-inside-title").click(function(){$(event.target).parents(".category-inside").toggleClass("open"),$(event.target).parents(".category-inside").hasClass("setting-open")||($(event.target).parents(".category-inside").hasClass("open")?$(document.body).trigger("tbay_category_inside_open"):$(document.body).trigger("tbay_category_inside_close"))}),$(window).on("click.Bst,click touchstart tap",function(e){let t=$(".category-inside .category-inside-title, .category-inside-content");if(($(".category-inside").hasClass("open")||$(".tbay_header-template").hasClass("nav-cover-active-4"))&&0==t.has(e.target).length&&!t.is(e.target)){let e=$(".category-inside");$.each(e,function(e,t){$(t).hasClass("setting-open")||($(t).removeClass("open"),$(".tbay_header-template").removeClass("nav-cover-active-4"))})}})}}class NewsLetter{constructor(){this._init()}_init(){let e=$("#popupNewsletterModal .popupnewsletter-close, #popupNewsletterModal .btn-text-close");setTimeout(function(){""!=Cookies.get("newsletter_remove")&&void 0!==Cookies.get("newsletter_remove")||$("#popupNewsletterModal").modal("show")},3e3),e.off().on("click",function(e){$(this).parents("#newsletter-popup").slideUp("slow"),Cookies.set("newsletter_remove","hidden",{expires:.1,path:"/"}),e.preventDefault()})}}class Search{constructor(){this._init()}_init(){this._tbaySearchMobile(),this._searchToTop(),this._searchCanvasForm(),this._searchCanvasFormV3(),$(".button-show-search").click(()=>$(".tbay-search-form").addClass("active")),$(".button-hidden-search").click(()=>$(".tbay-search-form").removeClass("active"))}_tbaySearchMobile(){$("#search-mobile-nav-cover").on("click",function(){$(this).parent().find("form").removeClass("open")})}_searchToTop(){$(".search-totop-wrapper .btn-search-totop").click(function(){$(".search-totop-content").toggleClass("active"),$(this).toggleClass("active")});var e=$(".search-totop-wrapper .btn-search-totop, .search-totop-content");$(window).on("click.Bst",function(t){0!=e.has(t.target).length||e.is(t.target)||($(".search-totop-wrapper .btn-search-totop").removeClass("active"),$(".search-totop-content").removeClass("active"))})}_searchCanvasForm(){let e=$("#tbay-search-form-canvas");if(0!==e.length){e.find("button.search-open").click(function(){$(event.target).parents("#tbay-search-form-canvas").toggleClass("open"),$("body").toggleClass("active-search-canvas")});let t=$(window),a=$("#tbay-search-form-canvas .search-open, #tbay-search-form-canvas .sidebar-content");t.on("click.Bst",function(t){e.hasClass("open")&&(0!=a.has(t.target).length||a.is(t.target)||(e.removeClass("open"),$("body").removeClass("active-search-canvas")))}),e.find("button.btn-search-close").click(function(){e.hasClass("open")&&(e.removeClass("open"),$("body").removeClass("active-search-canvas"))})}}_searchCanvasFormV3(){let e=$("#tbay-search-form-canvas-v3");if(0!==e.length){e.find("button.search-open").click(function(){$(event.target).parents("#tbay-search-form-canvas-v3").toggleClass("open"),$("body").toggleClass("active-search-canvas")});let t=$(window),a=$("#tbay-search-form-canvas-v3 .search-open, #tbay-search-form-canvas-v3 .sidebar-content");t.on("click.Bst",function(t){e.hasClass("open")&&(0!=a.has(t.target).length||a.is(t.target)||(e.removeClass("open"),$("body").removeClass("active-search-canvas")))}),e.find("button.btn-search-close").click(function(){e.hasClass("open")&&(e.removeClass("open"),$("body").removeClass("active-search-canvas"))})}}}class TreeView{constructor(){this._tbayTreeViewMenu()}_tbayTreeViewMenu(){void 0!==$.fn.treeview&&void 0!==$(".tbay-treeview")&&$(".tbay-treeview").each(function(){$(this).find("> ul").treeview({animated:400,collapsed:!0,unique:!0,persist:"location"})})}}class Section{constructor(){this._tbayMegaMenu(),this._tbayRecentlyView()}_tbayMegaMenu(){let e=$(".elementor-widget-tbay-nav-menu");0!==e.length&&e.find(".tbay-element-nav-menu").each(function(){"horizontal"===$(this).data("wrapper").layout&&($(this).closest(".elementor-top-column").hasClass("tbay-column-static")||$(this).closest(".elementor-top-column").addClass("tbay-column-static"),$(this).closest("section").hasClass("tbay-section-static")||$(this).closest("section").addClass("tbay-section-static"))})}_tbayRecentlyView(){let e=$(".tbay-element-product-recently-viewed");0!==e.length&&e.each(function(){"header"===$(this).data("wrapper").layout&&($(this).closest(".elementor-top-column").hasClass("tbay-column-static")||$(this).closest(".elementor-top-column").addClass("tbay-column-static"),$(this).closest(".elementor-top-column").hasClass("tbay-column-recentlyviewed")||$(this).closest(".elementor-top-column").addClass("tbay-column-recentlyviewed"),$(this).closest("section").hasClass("tbay-section-recentlyviewed")||$(this).closest("section").addClass("tbay-section-recentlyviewed"),$(this).closest("section").hasClass("tbay-section-static")||$(this).closest("section").addClass("tbay-section-static"))})}}class Preload{constructor(){this._init()}_init(){if($.fn.jpreLoader){var e=$(".js-preloader");e.jpreLoader({},function(){e.addClass("preloader-done"),$("body").trigger("preloader-done"),$(window).trigger("resize")})}$(".tbay-page-loader").delay(100).fadeOut(400,function(){$("body").removeClass("tbay-body-loading"),$(this).remove()}),$(document.body).hasClass("tbay-body-loader")&&setTimeout(function(){$(document.body).removeClass("tbay-body-loader"),$(".tbay-page-loader").fadeOut(250)},300)}}class Accordion{constructor(){this._init()}_init(){0!==$(".single-product").length&&$("#woocommerce-accordion").on("shown.bs.collapse",function(e){var t=$(this).find(".collapse.show").prev(".tabs-title");t&&$("html,body").animate({scrollTop:$(t).offset().top-150},500)})}}class CustomFonts{constructor(){this._init()}_init(){0!==jQuery(".list-tbay-custom-fonts-body").length&&(jQuery(".code-preview").hide(),jQuery(".show-code").off().on("click",function(e){return jQuery(this).children(".name").toggle(),jQuery(this).children(".code-preview").toggleClass("show"),e.stopPropagation(),!1}),jQuery("#quick-search").keyup(function(){var e=jQuery(this).val().trim().toLowerCase();jQuery(".icon-preview-box").hide().filter(function(){return-1!=jQuery(this).html().trim().toLowerCase().indexOf(e)}).show()}),jQuery(".font-size-changer a").click(function(e){e.preventDefault(),jQuery(".font-size-changer .active").removeClass("active"),jQuery(".icon-preview-box").removeClass("small-icons medium-icons large-icons").addClass(jQuery(this).attr("class")),jQuery(this).addClass("active")}))}}class MenuDropdownsAJAX{constructor(){this._initmenuDropdownsAJAX()}_initmenuDropdownsAJAX(){var e=this;$("body").on("mousemove",function(){$(".menu").has(".dropdown-load-ajax").each(function(){var t=$(this);t.hasClass("dropdowns-loading")||t.hasClass("dropdowns-loaded")||e.isNear(t,50,event)&&e.loadDropdowns(t)})})}loadDropdowns(e){var t=this;e.addClass("dropdowns-loading");var a="",n="",o="";"tbay-mobile-menu-navbar"===e.closest("nav").attr("id")?($("#main-mobile-menu-mmenu-wrapper").length>0&&(o+="_"+$("#main-mobile-menu-mmenu-wrapper").data("id")),a=maia_settings.storage_key+"_megamenu_"+o):a=maia_settings.storage_key+"_megamenu_"+e.closest("nav").data("id"),n=localStorage.getItem(a);var i=!1,s=[];e.find(".dropdown-load-ajax").each(function(){s.push($(this).find(".dropdown-html-placeholder").data("id"))});n=localStorage.getItem(a);try{i=JSON.parse(n)}catch(e){console.log("cant parse Json",e)}i?(t.renderResults(i,e),"tbay-mobile-menu-navbar"!==e.attr("id")&&e.removeClass("dropdowns-loading").addClass("dropdowns-loaded")):$.ajax({url:maia_settings.ajaxurl,data:{action:"maia_load_html_dropdowns",ids:s,security:maia_settings.wp_megamenunonce},dataType:"json",method:"POST",success:function(n){"success"===n.status?(t.renderResults(n.data,e),localStorage.setItem(a,JSON.stringify(n.data))):console.log("loading html dropdowns returns wrong data - ",n.message)},error:function(){console.log("loading html dropdowns ajax error")}})}renderResults(e,t){var a=this;Object.keys(e).forEach(function(n){a.removeDuplicatedStylesFromHTML(e[n],function(e){let a=e;const o='<li[^>]*><a[^>]*href=["]'+window.location.href+'["]>.*?</a></li>';let i=e.match(o);if(null!==i){let e=i[0],t=e.match(/(?:class)=(?:["']\W+\s*(?:\w+)\()?["']([^'"]+)['"]/g)[0].split('"')[1],n=t+" active",o=e.replace(t,n);a=a.replace(e,o)}t.find('[data-id="'+n+'"]').replaceWith(a),"tbay-mobile-menu-navbar"!==t.attr("id")&&(t.addClass("dropdowns-loaded"),setTimeout(function(){t.removeClass("dropdowns-loading")},1e3))})})}isNear(e,t,a){var n=e.offset().left-t,o=e.offset().top-t,i=n+e.width()+2*t,s=o+e.height()+2*t,r=a.pageX,c=a.pageY;return r>n&&r<i&&c>o&&c<s}removeDuplicatedStylesFromHTML(e,t){if(maia_settings.combined_css)return void t(e);{const a=/<style>.*?<\/style>/gm;let n=e.replace(a,"");return void t(n)}}}class MenuClickAJAX{constructor(){"undefined"!=typeof maia_settings&&this._initmenuClickAJAX()}_initmenuClickAJAX(){$(".element-menu-ajax.ajax-active").each(function(){$(this).find(".category-inside-title").off("click").on("click",function(e){e.preventDefault();var t=$(this);if(t.closest(".element-menu-ajax").hasClass("ajax-active")){var a=t.closest(".tbay-element"),n=a.data("wrapper").type_menu,o=a.data("wrapper").layout;if("toggle"===n)i=a.find(".category-inside-content > nav");else var i=a.find(".menu-canvas-content > nav");var s=i.data("id"),r=maia_settings.storage_key+"_"+s+"_"+o,c=!1,l=localStorage.getItem(r);try{c=JSON.parse(l)}catch(e){console.log("cant parse Json",e)}c?(i.html(c),a.removeClass("load-ajax"),t.closest(".element-menu-ajax").removeClass("ajax-active"),"treeview"===o?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):$.ajax({url:maia_settings.ajaxurl,data:{action:"maia_load_html_click",slug:s,type_menu:n,layout:o,security:maia_settings.wp_menuclicknonce},dataType:"json",method:"POST",beforeSend:function(e){a.addClass("load-ajax")},success:function(e){"success"===e.status?(i.html(e.data),localStorage.setItem(r,JSON.stringify(e.data)),"treeview"===o?$(document.body).trigger("tbay_load_html_click_treeview"):$(document.body).trigger("tbay_load_html_click")):console.log("loading html dropdowns returns wrong data - ",e.message),a.removeClass("load-ajax"),t.closest(".element-menu-ajax").removeClass("ajax-active")},error:function(){console.log("loading html dropdowns ajax error")}})}})})}}class CanvastemplateAJAX{constructor(){this._initcanvastemplateAJAX()}_initcanvastemplateAJAX(){$(".canvas-template-ajax.ajax-active").each(function(){$(this).find(".menu-click").off("click").on("click",function(e){e.preventDefault();var t=$(this);if(t.closest(".canvas-template-ajax").hasClass("ajax-active")){var a=t.parent().find(".canvas-menu-content"),n=a.find(".canvas-content-ajax"),o=t.data("id"),i=maia_settings.storage_key+"_canvas_template_"+o,s=!1,r=localStorage.getItem(i);try{s=JSON.parse(r)}catch(e){console.log("cant parse Json",e)}s?(n.html(s),a.removeClass("load-ajax"),t.closest(".canvas-template-ajax").removeClass("ajax-active"),$(document.body).trigger("tbay_load_canvas_template_html_click")):$.ajax({url:maia_settings.ajaxurl,data:{action:"maia_load_html_canvas_template_click",id:o,security:maia_settings.wp_templateclicknonce},dataType:"json",method:"POST",beforeSend:function(e){a.addClass("load-ajax")},success:function(e){"success"===e.status?(n.html(e.data),localStorage.setItem(i,JSON.stringify(e.data)),$(document.body).trigger("tbay_load_canvas_template_html_click")):console.log("loading html dropdowns returns wrong data - ",e.message),a.removeClass("load-ajax"),t.closest(".canvas-template-ajax").removeClass("ajax-active")},error:function(){console.log("loading html dropdowns ajax error")}})}})})}}class CndkBeforeAfter{constructor(){void 0!==$.fn.cndkbeforeafter&&this._beforeAfterImage()}_beforeAfterImage(){$(".tbay-before-after-image").cndkbeforeafter({mode:"drag",beforeTextPosition:"top-left"})}}class TimeTo{constructor(){void 0!==$.fn.timeTo&&this._init()}_init(){$('[data-time="timmer"], [data-countdown="countdown"]').each(function(e,t){let a=$(this).data("id"),n=$(this).data("date").split("-");var o=new Date(n[2]+"-"+n[0]+"-"+n[1]+"T"+n[3]+":"+n[4]+":"+n[5]);$("#countdown-"+a).timeTo({timeTo:new Date(o)})})}}class AutoComplete{constructor(){void 0!==$.Autocomplete&&"undefined"!=typeof maia_settings&&this._callAjaxSearch()}_callAjaxSearch(){var t=this,a=maia_settings.ajaxurl+"?action=maia_autocomplete_search&security="+maia_settings.wp_searchnonce,n=$("form.searchform.maia-ajax-search"),o=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};n.each(function(){var e=$(this),i=e.find("input[name=s]"),s=e.data("post-type"),r=Boolean(e.data("thumbnail"));if("product"===s)var c=Boolean(e.data("subtitle")),l=Boolean(e.data("price"));else var c=!1,l=!1;i.devbridgeAutocomplete({serviceUrl:t._AutoServiceUrl(i,a),minChars:t._AutoMinChars(i),appendTo:t._AutoAppendTo(i),width:"100%",maxHeight:"initial",onSelect:function(e){e.link.length>0&&(window.location.href=e.link)},onSearchStart:function(e){i.parents("form").addClass("tbay-loading")},beforeRender:function(e,t){void 0!==t[0].result&&$(e).prepend('<div class="list-header"><span>'+t[0].result+"</span></div>"),t[0].view_all&&$(e).append('<div class="view-all-products"><span>'+maia_settings.show_all_text+"</span></div>")},onSearchComplete:function(e,t){n.removeClass("tbay-loading"),$(this).parents("form").addClass("open"),$(document.body).trigger("tbay_searchcomplete")},formatResult:(e,a)=>{let n=t._initformatResult(e,a,o,r,l,c);return n},onHide:function(e){$(this).parents("form").hasClass("open")&&$(this).parents("form").removeClass("open")}}),$("body").click(function(){i.is(":focus")||i.each(function(){$(this).devbridgeAutocomplete("hide")})})});var i=n.find('[name="product_cat"], [name="category"]');i.length&&i.change(function(e){let n=$(e.target).parents("form").find("input[name=s]"),o=n.devbridgeAutocomplete();o.hide(),o.setOptions({serviceUrl:t._AutoServiceUrl(n,a)}),o.onValueChange()}),$(document.body).on("tbay_searchcomplete",function(){$(".view-all-products").on("click",function(){$(this).parents("form").submit(),e.stopPropagation()})})}_AutoServiceUrl(e,t){let a=e.parents("form"),n=parseInt(a.data("count")),o=a.data("post-type"),i=a.find('[name="product_cat"], [name="category"]').val();return n>0&&(t+="&number="+n),t+="&post_type="+o,i&&(t+="&product_cat="+i),t}_AutoAppendTo(e){let t=e.parents("form");return void 0!==t.data("appendto")?t.data("appendto"):t.find(".maia-search-results")}_AutoMinChars(e){let t=e.parents("form");return parseInt(t.data("minchars"))}_initformatResult(e,t,a,n,o,i){if(e.no_found)return'<div class="suggestion-title no-found-msg">'+e.value+"</div>";"&"==t&&(t="&#038;");var s="("+a(t)+")",r="";return n&&e.image&&(r+=' <div class="suggestion-thumb">'+e.image+"</div>"),r+='<div class="suggestion-group">',r+='<div class="suggestion-title product-title"><span>'+e.value.replace(new RegExp(s,"gi"),"<strong>$1</strong>").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</span></div>",i&&e.subtitle.length>0&&(r+='<div class="suggestion-subtitle product-subtitle"><span>'+e.subtitle.replace(new RegExp(s,"gi"),"<strong>$1</strong>").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</span></div>"),o&&e.price&&(r+=' <div class="suggestion-price price">'+e.price+"</div>"),r+="</div>"}}class Mmenu{constructor(){void 0!==$.fn.mmenu&&this._initMmenu()}_initMmenu(){$("body").hasClass("admin-bar")&&$("html").addClass("html-mmenu");var e="undefined"!=typeof maia_settings?maia_settings.cancel:"";$.mmenu.i18n({cancel:e});var t=$("#tbay-mobile-smartmenu");if(0!==$(t).length){var a=t.data("themes"),n=t.data("title"),o=Boolean(t.data("counters")),i=Boolean(t.data("enableeffects")),s={offCanvas:!0,navbar:{title:n},counters:o,extensions:[a,i?t.data("effectspanels"):"",i?t.data("effectslistitems"):""]},r={navbars:[],searchfield:{}};let e=$("#mm-tbay-bottom");e.length>0&&r.navbars.push({position:"bottom",content:""}),s=_.extend(r,s);var c={offCanvas:{pageSelector:"#tbay-main-content"},searchfield:{clear:!0}};$("#tbay-mobile-menu-navbar").mmenu(s,c),e.length>0&&e.prependTo($("#tbay-mobile-menu-navbar .mm-navbars_bottom"));let d=$("#mmenu-close");d.length>0&&d.prependTo($("#main-mobile-menu-mmenu")),$(".mm-panels").css("top",$(".mm-navbars_top").outerHeight());var l=$("#tbay-mobile-menu-navbar").data("mmenu");$("#mmenu-close").on("click",function(){l.close()})}}}class SumoSelect{constructor(){void 0!==jQuery.fn.SumoSelect&&this._init()}_init(){jQuery(document).ready(function(){jQuery(".woocommerce-currency-switcher,.woocommerce-fillter >.select, .woocommerce-ordering > .orderby, .tbay-filter select").SumoSelect({csvDispCount:3,captionFormatAllSelected:"Yeah, OK, so everything."}),jQuery(".tbay-search-form").each(function(){$(this).hasClass("tbay-search-mobile")||$(this).find("select").SumoSelect({forceCustomRendering:!0})})})}}window.$=window.jQuery,jQuery(document).ready(()=>{function e(e){new SumoSelect}new CustomFonts,new CanvastemplateAJAX,new MenuDropdownsAJAX,new MenuClickAJAX,new StickyHeader,new AccountMenu,new BackToTop,new FuncCommon,new NewsLetter,new Preload,new Search,new TreeView,new Accordion,new Section,new TimeTo,new CndkBeforeAfter,new AutoComplete,new Mmenu;if(jQuery(window).width()<1200){var t=new Mobile;t._topBarDevice(),jQuery(window).scroll(()=>{t._topBarDevice()})}new SumoSelect;jQuery(document).on("woof_ajax_done",e)}),setTimeout(function(){jQuery(document.body).on("tbay_load_html_click_treeview",()=>{new TreeView})},2e3),jQuery(window).on("resize",()=>{if(jQuery(window).width()<1200){var e=new Mobile;e._topBarDevice(),jQuery(window).scroll(()=>{e._topBarDevice()})}$(".mm-panels").css("bottom",$(".mm-navbars_bottom").outerHeight())});var CustomFontsHandler=function(e,t){new CustomFonts};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&"undefined"!=typeof maia_settings&&Array.isArray(maia_settings.elements_ready.customfonts)&&$.each(maia_settings.elements_ready.customfonts,function(e,t){elementorFrontend.hooks.addAction("frontend/element_ready/tbay-"+t+".default",CustomFontsHandler)})});var AutoCompleteHandler=function(e,t){new AutoComplete};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&"undefined"!=typeof maia_settings&&Array.isArray(maia_settings.elements_ready.autocomplete)&&$.each(maia_settings.elements_ready.autocomplete,function(e,t){elementorFrontend.hooks.addAction("frontend/element_ready/tbay-"+t+".default",AutoCompleteHandler)})});var CndkBeforeAfterHandler=function(e,t){new CndkBeforeAfter};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.isEditMode()&&"undefined"!=typeof maia_settings&&elementorFrontend.hooks.addAction("frontend/element_ready/tbay-before-after-image.default",CndkBeforeAfterHandler)});
